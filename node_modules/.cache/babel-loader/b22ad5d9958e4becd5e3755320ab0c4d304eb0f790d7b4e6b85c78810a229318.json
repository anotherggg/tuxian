{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { useStore } from 'vuex';\nimport { reactive, computed, ref } from 'vue';\nimport { findBrand } from '@/api/home.js';\nimport xtxSkeleton from '../../../components/library/xtx-skeleton.vue';\nexport default {\n  components: {\n    xtxSkeleton\n  },\n  name: 'HomeCategory',\n  setup() {\n    const brand = reactive({\n      id: 'brand',\n      name: '品牌',\n      children: [{\n        id: 'brand-children',\n        name: '品牌推荐'\n      }],\n      brands: []\n    });\n    const store = useStore();\n    const menuList = computed(() => {\n      const list = store.state.category.list.map(item => {\n        return {\n          id: item.id,\n          name: item.name,\n          children: item.children && item.children.slice(0, 2),\n          goods: item.goods\n        };\n      });\n      list.push(brand);\n      return list;\n    });\n    // 获取当前分类逻辑\n    const categoryId = ref(null);\n    const currCategory = computed(() => {\n      return menuList.value.find(item => item.id === categoryId.value);\n    });\n    // 获取品牌参数\n    findBrand().then(data => {\n      brand.brands = data.result;\n    });\n    return {\n      menuList,\n      categoryId,\n      currCategory\n    };\n  }\n};","map":{"version":3,"mappings":";AAsEA,SAASA,QAAO,QAAS,MAAM;AAC/B,SAASC,QAAQ,EAAEC,QAAQ,EAAEC,GAAE,QAAS,KAAK;AAC7C,SAASC,SAAQ,QAAS,eAAe;AACzC,OAAOC,WAAU,MAAO,8CAA8C;AACtE,eAAe;EACbC,UAAU,EAAE;IAAED;EAAY,CAAC;EAC3BE,IAAI,EAAE,cAAc;EACpBC,KAAK,GAAG;IACN,MAAMC,KAAI,GAAIR,QAAQ,CAAC;MACrBS,EAAE,EAAE,OAAO;MACXH,IAAI,EAAE,IAAI;MACVI,QAAQ,EAAE,CAAC;QAAED,EAAE,EAAE,gBAAgB;QAAEH,IAAI,EAAE;MAAO,CAAC,CAAC;MAClDK,MAAM,EAAE;IACV,CAAC,CAAC;IACF,MAAMC,KAAI,GAAIb,QAAQ,EAAE;IACxB,MAAMc,QAAO,GAAIZ,QAAQ,CAAC,MAAM;MAC9B,MAAMa,IAAG,GAAIF,KAAK,CAACG,KAAK,CAACC,QAAQ,CAACF,IAAI,CAACG,GAAG,CAAEC,IAAI,IAAK;QACnD,OAAO;UACLT,EAAE,EAAES,IAAI,CAACT,EAAE;UACXH,IAAI,EAAEY,IAAI,CAACZ,IAAI;UACfI,QAAQ,EAAEQ,IAAI,CAACR,QAAO,IAAKQ,IAAI,CAACR,QAAQ,CAACS,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC;UACpDC,KAAK,EAAEF,IAAI,CAACE;QACd,CAAC;MACH,CAAC,CAAC;MACFN,IAAI,CAACO,IAAI,CAACb,KAAK,CAAC;MAChB,OAAOM,IAAI;IACb,CAAC,CAAC;IACF;IACA,MAAMQ,UAAS,GAAIpB,GAAG,CAAC,IAAI,CAAC;IAC5B,MAAMqB,YAAW,GAAItB,QAAQ,CAAC,MAAM;MAClC,OAAOY,QAAQ,CAACW,KAAK,CAACC,IAAI,CAAEP,IAAI,IAAKA,IAAI,CAACT,EAAC,KAAMa,UAAU,CAACE,KAAK,CAAC;IACpE,CAAC,CAAC;IACF;IACArB,SAAS,EAAE,CAACuB,IAAI,CAAEC,IAAI,IAAK;MACzBnB,KAAK,CAACG,MAAK,GAAIgB,IAAI,CAACC,MAAM;IAC5B,CAAC,CAAC;IACF,OAAO;MAAEf,QAAQ;MAAES,UAAU;MAAEC;IAAa,CAAC;EAC/C;AACF,CAAC","names":["useStore","reactive","computed","ref","findBrand","xtxSkeleton","components","name","setup","brand","id","children","brands","store","menuList","list","state","category","map","item","slice","goods","push","categoryId","currCategory","value","find","then","data","result"],"sourceRoot":"","sources":["E:\\自己写的项目\\tuxian\\erabbit-pc-vue-project\\src\\views\\home\\components\\home-category.vue"],"sourcesContent":["<template>\n  <div class=\"home-category\" @mouseleave=\"categoryId = null\">\n    <ul class=\"menu\">\n      <li\n        v-for=\"item in menuList\"\n        :key=\"item.id\"\n        @mouseenter=\"categoryId = item.id\"\n        :class=\"{ active: categoryId === item.id }\"\n      >\n        <RouterLink :to=\"`/category/${item.id}`\">{{ item.name }}</RouterLink>\n        <template v-if=\"item.children\">\n          <RouterLink\n            v-for=\"sub in item.children\"\n            :key=\"sub.id\"\n            :to=\"`/category/sub/${sub.id}`\"\n            >{{ sub.name }}</RouterLink\n          >\n        </template>\n        <span v-else>\n          <xtx-skeleton\n            width=\"60px\"\n            height=\"18px\"\n            style=\"margin-right: 5px\"\n            bg=\"rgba(255,255,255,0.2)\"\n          />\n          <xtx-skeleton width=\"50px\" height=\"18px\" bg=\"rgba(255,255,255,0.2)\" />\n        </span>\n      </li>\n    </ul>\n    <!-- 弹层 -->\n    <div class=\"layer\">\n      <h4 v-if=\"currCategory\">\n        {{ currCategory.id === 'brand' ? '品牌' : '分类' }}推荐\n        <small>根据您的购买或浏览记录推荐</small>\n      </h4>\n      <ul\n        v-if=\"currCategory && currCategory.goods && currCategory.goods.length\"\n      >\n        <li v-for=\"item in currCategory.goods\" :key=\"item.id\">\n          <RouterLink to=\"/\">\n            <img :src=\"item.picture\" alt=\"\" />\n            <div class=\"info\">\n              <p class=\"name ellipsis-2\">{{ item.name }}</p>\n              <p class=\"desc ellipsis\">{{ item.desc }}</p>\n              <p class=\"price\"><i>¥</i>{{ item.price }}</p>\n            </div>\n          </RouterLink>\n        </li>\n      </ul>\n      <ul\n        v-if=\"currCategory && currCategory.brands && currCategory.brands.length\"\n      >\n        <li class=\"brand\" v-for=\"item in currCategory.brands\" :key=\"item.id\">\n          <RouterLink to=\"/\">\n            <img :src=\"item.picture\" alt=\"\" />\n            <div class=\"info\">\n              <p class=\"place\">\n                <i class=\"iconfont icon-dingwei\"></i>{{ item.place }}\n              </p>\n              <p class=\"name ellipsis\">{{ item.name }}</p>\n              <p class=\"desc ellipsis-2\">{{ item.desc }}</p>\n            </div>\n          </RouterLink>\n        </li>\n      </ul>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { useStore } from 'vuex';\nimport { reactive, computed, ref } from 'vue';\nimport { findBrand } from '@/api/home.js';\nimport xtxSkeleton from '../../../components/library/xtx-skeleton.vue';\nexport default {\n  components: { xtxSkeleton },\n  name: 'HomeCategory',\n  setup() {\n    const brand = reactive({\n      id: 'brand',\n      name: '品牌',\n      children: [{ id: 'brand-children', name: '品牌推荐' }],\n      brands: [],\n    });\n    const store = useStore();\n    const menuList = computed(() => {\n      const list = store.state.category.list.map((item) => {\n        return {\n          id: item.id,\n          name: item.name,\n          children: item.children && item.children.slice(0, 2),\n          goods: item.goods,\n        };\n      });\n      list.push(brand);\n      return list;\n    });\n    // 获取当前分类逻辑\n    const categoryId = ref(null);\n    const currCategory = computed(() => {\n      return menuList.value.find((item) => item.id === categoryId.value);\n    });\n    // 获取品牌参数\n    findBrand().then((data) => {\n      brand.brands = data.result;\n    });\n    return { menuList, categoryId, currCategory };\n  },\n};\n</script>\n\n<style scoped lang=\"less\">\n.home-category {\n  width: 250px;\n  height: 500px;\n  background: rgba(0, 0, 0, 0.8);\n  position: relative;\n  z-index: 99;\n  .menu {\n    li {\n      padding-left: 40px;\n      height: 50px;\n      line-height: 50px;\n      &:hover,\n      &.active {\n        background: @xtxColor;\n      }\n      a {\n        margin-right: 4px;\n        color: #fff;\n        &:first-child {\n          font-size: 16px;\n        }\n      }\n    }\n  }\n}\n\n</style>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}