{"ast":null,"code":"import { ref, watch } from 'vue';\nexport default {\n  name: 'XtxCarousel',\n  props: {\n    sliders: {\n      type: Array,\n      default: () => []\n    },\n    autoPlay: {\n      type: Boolean,\n      default: false\n    }\n  },\n  setup(props) {\n    console.log();\n    // 默认显示图片的索引\n    const index = ref(0);\n    // 自动播放\n    let timer = null;\n    const autoPlayFn = () => {\n      clearInterval(timer);\n      timer = setInterval(() => {\n        index.value++;\n        console.log(11);\n        if (index.value >= props.sliders.length) {\n          index.value = 0;\n        }\n      }, 3000);\n    };\n    watch(() => props.sliders, newVal => {\n      // 有数据才开启自动播放，才调用自动播放函数\n      if (newVal.length && props.autoPlay) {\n        index.value = 0;\n        autoPlayFn();\n      }\n    }, {\n      immediate: true\n    });\n    // 鼠标进入停止，移出开启自动滚动，前提条件：autoPlay:true\n    const stop = () => {\n      if (timer) clearInterval(timer);\n      console.log(999);\n    };\n    const start = () => {\n      if (props.sliders.length && props.autoPlay) {\n        autoPlayFn();\n      }\n    };\n    return {\n      index,\n      stop,\n      start\n    };\n  }\n};","map":{"version":3,"mappings":"AA+BA,SAASA,GAAG,EAAEC,KAAI,QAAS,KAAK;AAChC,eAAe;EACbC,IAAI,EAAE,aAAa;EACnBC,KAAK,EAAE;IACLC,OAAO,EAAE;MACPC,IAAI,EAAEC,KAAK;MACXC,OAAO,EAAE,MAAM;IACjB,CAAC;IACDC,QAAQ,EAAE;MACRH,IAAI,EAAEI,OAAO;MACbF,OAAO,EAAE;IACX;EACF,CAAC;EACDG,KAAK,CAACP,KAAK,EAAE;IACXQ,OAAO,CAACC,GAAG,EAAE;IACb;IACA,MAAMC,KAAI,GAAIb,GAAG,CAAC,CAAC,CAAC;IACpB;IACA,IAAIc,KAAI,GAAI,IAAI;IAChB,MAAMC,UAAS,GAAI,MAAM;MACvBC,aAAa,CAACF,KAAK,CAAC;MACpBA,KAAI,GAAIG,WAAW,CAAC,MAAM;QACxBJ,KAAK,CAACK,KAAK,EAAE;QACbP,OAAO,CAACC,GAAG,CAAC,EAAE,CAAC;QACf,IAAIC,KAAK,CAACK,KAAI,IAAKf,KAAK,CAACC,OAAO,CAACe,MAAM,EAAE;UACvCN,KAAK,CAACK,KAAI,GAAI,CAAC;QACjB;MACF,CAAC,EAAE,IAAI,CAAC;IACV,CAAC;IACDjB,KAAK,CACH,MAAME,KAAK,CAACC,OAAO,EAClBgB,MAAM,IAAK;MACV;MACA,IAAIA,MAAM,CAACD,MAAK,IAAKhB,KAAK,CAACK,QAAQ,EAAE;QACnCK,KAAK,CAACK,KAAI,GAAI,CAAC;QACfH,UAAU,EAAE;MACd;IACF,CAAC,EACD;MAAEM,SAAS,EAAE;IAAK,EACnB;IACD;IACA,MAAMC,IAAG,GAAI,MAAM;MACjB,IAAIR,KAAK,EAAEE,aAAa,CAACF,KAAK,CAAC;MAC/BH,OAAO,CAACC,GAAG,CAAC,GAAG,CAAC;IAClB,CAAC;IACD,MAAMW,KAAI,GAAI,MAAM;MAClB,IAAIpB,KAAK,CAACC,OAAO,CAACe,MAAK,IAAKhB,KAAK,CAACK,QAAQ,EAAE;QAC1CO,UAAU,EAAE;MACd;IACF,CAAC;IAED,OAAO;MAAEF,KAAK;MAAES,IAAI;MAAEC;IAAM,CAAC;EAC/B;AACF,CAAC","names":["ref","watch","name","props","sliders","type","Array","default","autoPlay","Boolean","setup","console","log","index","timer","autoPlayFn","clearInterval","setInterval","value","length","newVal","immediate","stop","start"],"sourceRoot":"","sources":["E:\\自己写的项目\\tuxian\\erabbit-pc-vue-project\\src\\components\\library\\xtx-carousel.vue"],"sourcesContent":["<template>\n  <div class=\"xtx-carousel\" @mouseenter=\"stop()\" @mouseleave=\"start()\">\n    <ul class=\"carousel-body\">\n      <li\n        class=\"carousel-item fade\"\n        v-for=\"(item, i) in sliders\"\n        :key=\"i\"\n        :class=\"{ fade: index === i }\"\n      >\n        <RouterLink to=\"/\">\n          <img :src=\"item.imgUrl\" alt=\"\" />\n        </RouterLink>\n      </li>\n    </ul>\n    <a href=\"javascript:;\" class=\"carousel-btn prev\"\n      ><i class=\"iconfont icon-angle-left\"></i\n    ></a>\n    <a href=\"javascript:;\" class=\"carousel-btn next\"\n      ><i class=\"iconfont icon-angle-right\"></i\n    ></a>\n    <div class=\"carousel-indicator\">\n      <span\n        v-for=\"(item, i) in sliders\"\n        :key=\"i\"\n        :class=\"{ active: index === i }\"\n      ></span>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { ref, watch } from 'vue';\nexport default {\n  name: 'XtxCarousel',\n  props: {\n    sliders: {\n      type: Array,\n      default: () => [],\n    },\n    autoPlay: {\n      type: Boolean,\n      default: false,\n    },\n  },\n  setup(props) {\n    console.log();\n    // 默认显示图片的索引\n    const index = ref(0);\n    // 自动播放\n    let timer = null;\n    const autoPlayFn = () => {\n      clearInterval(timer);\n      timer = setInterval(() => {\n        index.value++;\n        console.log(11);\n        if (index.value >= props.sliders.length) {\n          index.value = 0;\n        }\n      }, 3000);\n    };\n    watch(\n      () => props.sliders,\n      (newVal) => {\n        // 有数据才开启自动播放，才调用自动播放函数\n        if (newVal.length && props.autoPlay) {\n          index.value = 0;\n          autoPlayFn();\n        }\n      },\n      { immediate: true }\n    );\n    // 鼠标进入停止，移出开启自动滚动，前提条件：autoPlay:true\n    const stop = () => {\n      if (timer) clearInterval(timer);\n      console.log(999);\n    };\n    const start = () => {\n      if (props.sliders.length && props.autoPlay) {\n        autoPlayFn();\n      }\n    };\n\n    return { index, stop, start };\n  },\n};\n</script>\n<style scoped lang=\"less\">\n.xtx-carousel {\n  width: 100%;\n  height: 100%;\n  min-width: 300px;\n  min-height: 150px;\n  position: relative;\n  .carousel {\n    &-body {\n      width: 100%;\n      height: 100%;\n    }\n    &-item {\n      width: 100%;\n      height: 100%;\n      position: absolute;\n      left: 0;\n      top: 0;\n      opacity: 0;\n      transition: opacity 0.5s linear;\n      &.fade {\n        opacity: 1;\n        z-index: 1;\n      }\n      img {\n        width: 100%;\n        height: 100%;\n      }\n    }\n    &-indicator {\n      position: absolute;\n      left: 0;\n      bottom: 20px;\n      z-index: 2;\n      width: 100%;\n      text-align: center;\n      span {\n        display: inline-block;\n        width: 12px;\n        height: 12px;\n        background: rgba(0, 0, 0, 0.2);\n        border-radius: 50%;\n        cursor: pointer;\n        ~ span {\n          margin-left: 12px;\n        }\n        &.active {\n          background: #fff;\n        }\n      }\n    }\n    &-btn {\n      width: 44px;\n      height: 44px;\n      background: rgba(0, 0, 0, 0.2);\n      color: #fff;\n      border-radius: 50%;\n      position: absolute;\n      top: 228px;\n      z-index: 2;\n      text-align: center;\n      line-height: 44px;\n      opacity: 0;\n      transition: all 0.5s;\n      &.prev {\n        left: 20px;\n      }\n      &.next {\n        right: 20px;\n      }\n    }\n  }\n//   &:hover {\n//     .carousel-btn {\n//       opacity: 1;\n//     }\n//   }\n}\n</style>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}